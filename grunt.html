<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì—Ä—É–Ω—Ç–æ–≤–µ–¥ üå±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        /* –°–ë–†–û–° –°–¢–ò–õ–ï–ô */
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
        }
        
        /* –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò */
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #795548 0%, #5D4037 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .app-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            min-height: 600px;
        }
        
        /* –≠–ö–†–ê–ù–´ */
        .screen {
            display: none;
            padding: 30px 20px;
            min-height: 600px;
        }
        
        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò */
        #loading-screen {
            text-align: center;
            background: linear-gradient(135deg, #8D6E63 0%, #5D4037 100%);
            color: white;
        }
        
        .logo-container {
            margin: 40px 0;
        }
        
        .logo-svg {
            width: 150px;
            height: 150px;
            margin: 0 auto 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .logo-svg .plant-emoji {
            font-size: 90px;
            animation: gentleFloat 3s infinite ease-in-out;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }
        
        @keyframes gentleFloat {
            0%, 100% { 
                transform: translateY(0px);
            }
            50% { 
                transform: translateY(-15px);
            }
        }
        
        h1 {
            font-family: 'Nunito', sans-serif;
            font-weight: 900;
            font-size: 36px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .loader-subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 40px;
        }
        
        .loader-bar {
            width: 100%;
            max-width: 280px;
            height: 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 6px;
            overflow: hidden;
            margin: 0 auto 15px;
        }
        
        .loader-progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #FF9800, #FF5722);
            border-radius: 6px;
            transition: width 0.3s;
        }
        
        .loader-text {
            font-size: 14px;
            font-style: italic;
            opacity: 0.8;
            margin-bottom: 40px;
        }
        
        .loading-stats {
            display: flex;
            justify-content: space-around;
            width: 100%;
            max-width: 300px;
            margin: 40px auto 0;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.2);
        }
        
        .stat-number {
            font-size: 28px;
            font-weight: 800;
            color: #FF9800;
            display: block;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        /* –≠–ö–†–ê–ù –í–´–ë–û–†–ê –°–ï–ú–ï–ô–°–¢–í–ê */
        .screen-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .screen-title {
            font-family: 'Nunito', sans-serif;
            font-weight: 900;
            font-size: 28px;
            color: #5D4037;
            margin-bottom: 10px;
        }
        
        .screen-subtitle {
            font-size: 16px;
            color: #8D6E63;
            margin-bottom: 30px;
        }
        
        .plant-search {
            margin-bottom: 30px;
        }
        
        .search-label {
            display: block;
            font-weight: 600;
            color: #5D4037;
            margin-bottom: 12px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .search-input-container {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-input {
            width: 100%;
            padding: 16px 20px 16px 50px;
            border: 2px solid #D7CCC8;
            border-radius: 16px;
            font-size: 16px;
            font-family: 'Nunito', sans-serif;
            transition: all 0.3s;
            background: #FAFAFA;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #8D6E63;
            background: white;
            box-shadow: 0 4px 15px rgba(141,110,99,0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            color: #8D6E63;
        }
        
        .search-hint {
            font-size: 14px;
            color: #A1887F;
            margin-top: 8px;
            font-style: italic;
        }
        
        .search-results {
            background: #F5F5F5;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            border: 2px dashed #D7CCC8;
            display: none;
        }
        
        .search-results.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .search-match {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 2px solid #8D6E63;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .search-match:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(141,110,99,0.2);
        }
        
        .search-match-title {
            font-weight: 800;
            color: #5D4037;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .search-match-subtitle {
            font-size: 14px;
            color: #8D6E63;
        }
        
        .or-divider {
            text-align: center;
            margin: 25px 0;
            position: relative;
        }
        
        .or-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #D7CCC8;
        }
        
        .or-text {
            background: white;
            padding: 0 20px;
            color: #8D6E63;
            font-weight: 700;
            position: relative;
            display: inline-block;
        }
        
        .family-select-label {
            display: block;
            font-weight: 600;
            color: #5D4037;
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .families-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 30px;
        }
        
        .family-btn {
            background: #F5F5F5;
            border: 2px solid #D7CCC8;
            padding: 18px 10px;
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
            color: #5D4037;
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            min-height: 100px;
            justify-content: center;
        }
        
        .family-btn:hover {
            background: #EFEBE9;
            transform: translateY(-2px);
        }
        
        .family-btn.selected {
            background: #8D6E63;
            color: white;
            border-color: #5D4037;
            box-shadow: 0 4px 15px rgba(141,110,99,0.3);
        }
        
        .family-emoji {
            font-size: 32px;
            transition: transform 0.3s;
        }
        
        .family-btn.selected .family-emoji {
            transform: scale(1.2);
        }
        
        /* –≠–ö–†–ê–ù –û–ë–†–ê–ë–û–¢–ö–ò */
        #processing-screen {
            text-align: center;
            background: linear-gradient(135deg, #8D6E63 0%, #5D4037 100%);
            color: white;
            padding-top: 60px;
        }
        
        .processing-logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .processing-logo .search-emoji {
            font-size: 90px;
            animation: searchPulse 1.5s infinite ease-in-out, rotateSearch 30s infinite linear;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
            transform-origin: center center;
        }
        
        @keyframes searchPulse {
            0%, 100% { 
                transform: scale(1) rotate(0deg); 
                opacity: 1;
            }
            50% { 
                transform: scale(1.15) rotate(180deg); 
                opacity: 0.8;
            }
        }
        
        @keyframes rotateSearch {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .processing-subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 40px;
        }
        
        .processing-loader {
            width: 100%;
            max-width: 280px;
            margin: 30px auto;
        }
        
        .processing-bar {
            height: 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .processing-progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #FF9800, #FF5722);
            border-radius: 6px;
            transition: width 0.3s;
        }
        
        .processing-text {
            font-size: 14px;
            font-style: italic;
            opacity: 0.8;
        }
        
        .processing-steps {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 16px;
            width: 100%;
            max-width: 280px;
            margin: 30px auto 0;
            backdrop-filter: blur(10px);
        }
        
        .step {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 15px;
            opacity: 0.5;
            text-align: left;
        }
        
        .step.active { 
            opacity: 1; 
            color: #FF9800;
        }
        
        .step i { 
            width: 24px; 
            text-align: center; 
        }
        
        /* –≠–ö–†–ê–ù –†–ï–ó–£–õ–¨–¢–ê–¢–û–í */
        #results-screen {
            padding: 30px 20px;
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .results-logo {
            font-size: 60px;
            margin-bottom: 15px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%,100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .results-title {
            font-family: 'Nunito', sans-serif;
            font-weight: 900;
            font-size: 28px;
            color: #5D4037;
            margin-bottom: 5px;
        }
        
        .results-subtitle {
            font-size: 16px;
            color: #8D6E63;
            margin-top: 5px;
        }
        
        .results-container {
            margin-bottom: 30px;
        }
        
        .result-card {
            border: 3px solid #D7CCC8;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            text-align: left;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #F5F5F5, #EFEBE9);
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .result-family {
            display: inline-block;
            background: #8D6E63;
            color: white;
            padding: 8px 16px;
            border-radius: 12px;
            font-weight: 700;
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .result-title {
            font-family: 'Nunito', sans-serif;
            font-weight: 900;
            font-size: 22px;
            color: #5D4037;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            letter-spacing: -0.5px;
        }
        
        .soil-components {
            background: white;
            border-radius: 15px;
            padding: 20px;
            border: 2px dashed #A1887F;
            margin-bottom: 25px;
        }
        
        .component-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #E0E0E0;
        }
        
        .component-item:last-child {
            border-bottom: none;
        }
        
        .component-emoji {
            font-size: 28px;
            width: 50px;
            text-align: center;
        }
        
        .component-content {
            flex: 1;
        }
        
        .component-name {
            font-weight: 800;
            color: #5D4037;
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .component-percentage {
            font-size: 14px;
            color: #8D6E63;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .component-desc {
            font-size: 13px;
            color: #A1887F;
            line-height: 1.4;
        }
        
        .result-tips {
            background: #E8F5E9;
            border-radius: 15px;
            padding: 20px;
            border-left: 4px solid #4CAF50;
        }
        
        .tips-title {
            font-weight: 800;
            color: #2E7D32;
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tips-list {
            list-style: none;
        }
        
        .tip-item {
            padding: 10px 0;
            border-bottom: 1px dashed #A5D6A7;
            font-size: 15px;
            color: #1B5E20;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .tip-item:last-child {
            border-bottom: none;
        }
        
        .tip-icon {
            color: #4CAF50;
            margin-top: 3px;
        }
        
        /* –ö–ù–û–ü–ö–ò –®–ï–†–ò–ù–ì–ê */
        .share-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px dashed #D7CCC8;
            text-align: center;
        }
        
        .share-section h3 {
            font-family: 'Nunito', sans-serif;
            font-weight: 800;
            font-size: 18px;
            color: #5D4037;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .share-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            justify-content: center;
        }
        
        .share-btn {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 28px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .share-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .share-btn.vk { 
            background: #4C75A3; 
            box-shadow: 0 4px 12px rgba(76, 117, 163, 0.3);
        }
        
        .share-btn.tg { 
            background: #0088cc; 
            box-shadow: 0 4px 12px rgba(0, 136, 204, 0.3);
        }
        
        .share-note {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
            font-style: italic;
        }
        
        .bot-link {
            display: inline-block;
            background: #8D6E63;
            color: white;
            padding: 10px 20px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.3s;
        }
        
        .bot-link:hover {
            background: #5D4037;
            transform: translateY(-2px);
        }
        
        /* –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 30px;
        }
        
        .btn-next, .btn-restart {
            padding: 16px;
            background: linear-gradient(135deg, #FF9800, #F57C00);
            color: white;
            border: none;
            border-radius: 16px;
            font-weight: 700;
            font-family: 'Nunito', sans-serif;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            font-size: 17px;
        }
        
        .btn-next:hover, .btn-restart:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255,152,0,0.4);
        }
        
        .btn-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-channel {
            padding: 16px;
            background: linear-gradient(135deg, #0088cc, #006699);
            color: white;
            border: none;
            border-radius: 16px;
            font-weight: 700;
            font-family: 'Nunito', sans-serif;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .btn-channel:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,136,204,0.4);
        }
        
        /* –ê–î–ê–ü–¢–ê–¶–ò–Ø */
        @media (max-width: 400px) {
            .app-container {
                border-radius: 16px;
            }
            
            .screen {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 32px;
            }
            
            .screen-title {
                font-size: 24px;
            }
            
            .families-container {
                grid-template-columns: 1fr;
            }
            
            .family-btn {
                padding: 16px 8px;
                font-size: 14px;
                min-height: 90px;
            }
            
            .result-title {
                font-size: 20px;
            }
            
            .logo-svg .plant-emoji,
            .processing-logo .search-emoji {
                font-size: 70px;
            }
            
            .share-btn {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }
        }
        
        /* –ê–ù–ò–ú–ê–¶–ò–ò */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- –≠–ö–†–ê–ù 1: –ó–ê–ì–†–£–ó–ö–ê -->
        <div class="screen active" id="loading-screen">
            <div class="logo-container">
                <div class="logo-svg">
                    <div class="plant-emoji">üåø</div>
                </div>
                <h1>–ì—Ä—É–Ω—Ç–æ–≤–µ–¥</h1>
                <div class="loader-subtitle">–ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–æ—á–≤—ã...</div>
            </div>
            
            <div class="loader-bar">
                <div class="loader-progress" id="loader-progress"></div>
            </div>
            <div class="loader-text" id="loader-status">–ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–∑—É –≥—Ä—É–Ω—Ç–æ–≤...</div>
            
            <div class="loading-stats">
                <div>
                    <span class="stat-number">35</span>
                    <span class="stat-label">—Å–µ–º–µ–π—Å—Ç–≤</span>
                </div>
                <div>
                    <span class="stat-number">180+</span>
                    <span class="stat-label">—Ä–∞—Å—Ç–µ–Ω–∏–π</span>
                </div>
                <div>
                    <span class="stat-number">‚àû</span>
                    <span class="stat-label">—Ä–µ—Ü–µ–ø—Ç–æ–≤</span>
                </div>
            </div>
        </div>
        
        <!-- –≠–ö–†–ê–ù 2: –í–´–ë–û–† –°–ï–ú–ï–ô–°–¢–í–ê -->
        <div class="screen" id="selection-screen">
            <div class="screen-header">
                <h2 class="screen-title">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≥—Ä—É–Ω—Ç–æ–≤</h2>
                <p class="screen-subtitle">–ù–∞–π–¥–µ–º –∏–¥–µ–∞–ª—å–Ω—É—é –ø–æ—á–≤—É –¥–ª—è –≤–∞—à–µ–≥–æ —Ä–∞—Å—Ç–µ–Ω–∏—è</p>
            </div>
            
            <div class="plant-search">
                <label class="search-label">
                    <i class="fas fa-search"></i>
                    –ù–µ –∑–Ω–∞–µ—Ç–µ —Å–µ–º–µ–π—Å—Ç–≤–æ?
                </label>
                <div class="search-input-container">
                    <input type="text" 
                           class="search-input" 
                           id="plant-search-input" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è...">
                    <div class="search-icon">üå±</div>
                </div>
                <p class="search-hint">–ù–∞–ø—Ä–∏–º–µ—Ä: "–º–æ–Ω—Å—Ç–µ—Ä–∞", "—Ñ–∏–∫—É—Å", "–æ—Ä—Ö–∏–¥–µ—è"</p>
                
                <div class="search-results" id="search-results">
                    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
            
            <div class="or-divider">
                <span class="or-text">–ò–õ–ò</span>
            </div>
            
            <div class="family-selection">
                <label class="family-select-label">
                    <i class="fas fa-seedling"></i>
                    –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–º–µ–π—Å—Ç–≤–æ —Ä–∞—Å—Ç–µ–Ω–∏–π:
                </label>
                
                <div class="families-container" id="families-container">
                    <!-- –ö–Ω–æ–ø–∫–∏ —Å–µ–º–µ–π—Å—Ç–≤ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∞ - —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä–µ–ª–æ–¥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π -->
        </div>
        
        <!-- –≠–ö–†–ê–ù 3: –û–ë–†–ê–ë–û–¢–ö–ò -->
        <div class="screen" id="processing-screen">
            <div class="processing-logo">
                <div class="search-emoji">üîç</div>
            </div>
            
            <h2>–°–æ–∑–¥–∞–µ–º —Ä–µ—Ü–µ–ø—Ç...</h2>
            <p class="processing-subtitle">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è</p>
            
            <div class="processing-loader">
                <div class="processing-bar">
                    <div class="processing-progress" id="processing-progress"></div>
                </div>
                <div class="processing-text" id="processing-status">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
            </div>
            
            <div class="processing-steps">
                <div class="step" id="step1">
                    <i class="fas fa-check"></i>
                    <span>–ê–Ω–∞–ª–∏–∑ —Å–µ–º–µ–π—Å—Ç–≤–∞</span>
                </div>
                <div class="step" id="step2">
                    <i class="fas fa-check"></i>
                    <span>–ü–æ–¥–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</span>
                </div>
                <div class="step" id="step3">
                    <i class="fas fa-check"></i>
                    <span>–†–∞—Å—á–µ—Ç –ø—Ä–æ–ø–æ—Ä—Ü–∏–π</span>
                </div>
                <div class="step" id="step4">
                    <i class="fas fa-spinner fa-spin"></i>
                    <span>–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞</span>
                </div>
            </div>
        </div>
        
        <!-- –≠–ö–†–ê–ù 4: –†–ï–ó–£–õ–¨–¢–ê–¢–´ -->
        <div class="screen" id="results-screen">
            <div class="results-header">
                <div class="results-logo">üå±</div>
                <h2 class="results-title">–í–∞—à —Ä–µ—Ü–µ–ø—Ç –≥—Ä—É–Ω—Ç–∞</h2>
                <p class="results-subtitle">–ò–¥–µ–∞–ª—å–Ω—ã–π —Å–æ—Å—Ç–∞–≤ –¥–ª—è –∑–¥–æ—Ä–æ–≤–æ–≥–æ —Ä–æ—Å—Ç–∞</p>
            </div>
            
            <div class="results-container" id="results-container">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
            
            <div class="share-section">
                <h3><i class="fas fa-share-alt"></i> –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ—Ü–µ–ø—Ç–æ–º</h3>
                <div class="share-buttons">
                    <button class="share-btn vk" id="share-vk">
                        <i class="fab fa-vk"></i>
                    </button>
                    <button class="share-btn tg" id="share-tg">
                        <i class="fab fa-telegram"></i>
                    </button>
                </div>
                <p class="share-note">–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Telegram –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:</p>
                <a href="https://t.me/PlantSurvivorbot/test" target="_blank" class="bot-link">
                    <i class="fab fa-telegram"></i> Plant Survivor Mini App
                </a>
            </div>
            
            <div class="action-buttons">
                <button class="btn-restart" id="restart-btn">
                    <i class="fas fa-redo"></i> –ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç
                </button>
                <a href="https://t.me/geyzerrr_A" target="_blank" class="btn-channel">
                    <i class="fab fa-telegram"></i> –°–æ–∑–¥–∞–Ω–æ @geyzerrr
                </a>
            </div>
        </div>
    </div>
    
    <script>
        // –ë–ê–ó–ê –î–ê–ù–ù–´–• –†–ê–°–¢–ï–ù–ò–ô –ò –°–ï–ú–ï–ô–°–¢–í (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ø–æ —Å–µ–º–µ–π—Å—Ç–≤–≤–∞.txt)
        const PLANT_DATABASE = {
            // –ê–∫–∞–Ω—Ç–æ–≤—ã–µ
            "–∫—Ä–æ—Å—Å–∞–Ω–¥—Ä–∞": { family: "–ê–∫–∞–Ω—Ç–æ–≤—ã–µ", emoji: "üå∫" },
            "—Ñ–∏—Ç—Ç–æ–Ω–∏—è": { family: "–ê–∫–∞–Ω—Ç–æ–≤—ã–µ", emoji: "üå∫" },
            "—Ç—É–Ω–±–µ—Ä–≥–∏—è": { family: "–ê–∫–∞–Ω—Ç–æ–≤—ã–µ", emoji: "üå∫" },
            
            // –ê–∏–∑–æ–≤—ã–µ
            "–ª–∏—Ç–æ–ø—Å": { family: "–ê–∏–∑–æ–≤—ã–µ", emoji: "ü™®" },
            "–ª–∏—Ç–æ–ø—Å—ã": { family: "–ê–∏–∑–æ–≤—ã–µ", emoji: "ü™®" },
            
            // –ê–º–∞—Ä–∏–ª–ª–∏—Å–æ–≤—ã–µ
            "–∞–º–∞—Ä–∏–ª–ª–∏—Å": { family: "–ê–º–∞—Ä–∏–ª–ª–∏—Å–æ–≤—ã–µ", emoji: "üå∫" },
            
            // –ê–Ω–∞–∫–∞–º–ø—Å–µ—Ä–æ–≤—ã–µ
            "–∞–Ω–∞–∫–∞–º–ø—Å–µ—Ä–æ—Å": { family: "–ê–Ω–∞–∫–∞–º–ø—Å–µ—Ä–æ–≤—ã–µ", emoji: "üåø" },
            
            // –ê—Ä–æ–∏–¥–Ω—ã–µ
            "–∞–ª–æ–∫–∞–∑–∏—è": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "–∞–Ω—Ç—É—Ä–∏—É–º": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "–¥–∏—Ñ—Ñ–µ–Ω–±–∞—Ö–∏—è": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "–∑–∞–º–∏–æ–∫—É–ª—å–∫–∞—Å": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "–º–æ–Ω—Å—Ç–µ—Ä–∞": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "—Å–ø–∞—Ç–∏—Ñ–∏–ª–ª—É–º": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "—Ñ–∏–ª–æ–¥–µ–Ω–¥—Ä–æ–Ω": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "—ç–ø–∏–ø—Ä–µ–º–Ω—É–º": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "—Å–∏–Ω–≥–æ–Ω–∏—É–º": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "–∞–≥–ª–∞–æ–Ω–µ–º–∞": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            "–∫–∞–ª–∞–¥–∏—É–º": { family: "–ê—Ä–æ–∏–¥–Ω—ã–µ", emoji: "üçÉ" },
            
            // –ê—Ä–∞–ª–∏–µ–≤—ã–µ
            "–ø–ª—é—â": { family: "–ê—Ä–∞–ª–∏–µ–≤—ã–µ", emoji: "üåø" },
            
            // –ê—Å—Ñ–æ–¥–µ–ª–æ–≤—ã–µ
            "–∞–ª–æ—ç": { family: "–ê—Å—Ñ–æ–¥–µ–ª–æ–≤—ã–µ", emoji: "üåµ" },
            "–≥–∞—Å—Ç–µ—Ä–∏—è": { family: "–ê—Å—Ñ–æ–¥–µ–ª–æ–≤—ã–µ", emoji: "üåµ" },
            "—Ö–∞–≤–æ—Ä—Ç–∏—è": { family: "–ê—Å—Ñ–æ–¥–µ–ª–æ–≤—ã–µ", emoji: "üåµ" },
            
            // –ê—Å—Ç—Ä–æ–≤—ã–µ
            "–∫—Ä–µ—Å—Ç–æ–≤–Ω–∏–∫": { family: "–ê—Å—Ç—Ä–æ–≤—ã–µ", emoji: "üåº" },
            "–≥–∏–Ω—É—Ä–∞": { family: "–ê—Å—Ç—Ä–æ–≤—ã–µ", emoji: "üåº" },
            
            // –ë–∞–Ω–∞–Ω–æ–≤—ã–µ
            "–±–∞–Ω–∞–Ω": { family: "–ë–∞–Ω–∞–Ω–æ–≤—ã–µ", emoji: "üçå" },
            
            // –ë–µ–≥–æ–Ω–∏–µ–≤—ã–µ
            "–±–µ–≥–æ–Ω–∏—è": { family: "–ë–µ–≥–æ–Ω–∏–µ–≤—ã–µ", emoji: "üå∫" },
            
            // –ë–∏–≥–Ω–æ–Ω–∏–µ–≤—ã–µ
            "—Ç–µ–∫–æ–º–∞–Ω—Ç–∞": { family: "–ë–∏–≥–Ω–æ–Ω–∏–µ–≤—ã–µ", emoji: "üå∫" },
            
            // –ë–æ–±–æ–≤—ã–µ
            "–±–∞—É—Ö–∏–Ω–∏—è": { family: "–ë–æ–±–æ–≤—ã–µ", emoji: "ü¶ã" },
            "—ç—Ä–∏—Ç—Ä–∏–Ω–∞": { family: "–ë–æ–±–æ–≤—ã–µ", emoji: "ü¶ã" },
            "–º–∏–º–æ–∑–∞": { family: "–ë–æ–±–æ–≤—ã–µ", emoji: "ü¶ã" },
            "–∞–∫–∞—Ü–∏—è": { family: "–ë–æ–±–æ–≤—ã–µ", emoji: "ü¶ã" },
            
            // –ë—Ä–æ–º–µ–ª–∏–µ–≤—ã–µ
            "–±—Ä–æ–º–µ–ª–∏—è": { family: "–ë—Ä–æ–º–µ–ª–∏–µ–≤—ã–µ", emoji: "üå∫" },
            "–∞–Ω–∞–Ω–∞—Å": { family: "–ë—Ä–æ–º–µ–ª–∏–µ–≤—ã–µ", emoji: "üçç" },
            "—Ç–∏–ª–ª–∞–Ω–¥—Å–∏—è": { family: "–ë—Ä–æ–º–µ–ª–∏–µ–≤—ã–µ", emoji: "üå∫" },
            "–≥—É–∑–º–∞–Ω–∏—è": { family: "–ë—Ä–æ–º–µ–ª–∏–µ–≤—ã–µ", emoji: "üå∫" },
            "–≤—Ä–∏–µ–∑–∏—è": { family: "–ë—Ä–æ–º–µ–ª–∏–µ–≤—ã–µ", emoji: "üå∫" },
            "—ç—Ö–º–µ—è": { family: "–ë—Ä–æ–º–µ–ª–∏–µ–≤—ã–µ", emoji: "üå∫" },
            
            // –í–∏–Ω–æ–≥—Ä–∞–¥–æ–≤—ã–µ
            "—Ü–∏—Å—Å—É—Å": { family: "–í–∏–Ω–æ–≥—Ä–∞–¥–æ–≤—ã–µ", emoji: "üçá" },
            
            // –ì–µ—Ä–∞–Ω–∏–µ–≤—ã–µ
            "–ø–µ–ª–∞—Ä–≥–æ–Ω–∏—è": { family: "–ì–µ—Ä–∞–Ω–∏–µ–≤—ã–µ", emoji: "üå∫" },
            "–≥–µ—Ä–∞–Ω—å": { family: "–ì–µ—Ä–∞–Ω–∏–µ–≤—ã–µ", emoji: "üå∫" },
            
            // –ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ
            "–∞—Ö–∏–º–µ–Ω–µ–∑": { family: "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ", emoji: "üíú" },
            "—ç–ø–∏—Å—Ü–∏—è": { family: "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ", emoji: "üíú" },
            "—ç—Å—Ö–∏–Ω–∞–Ω—Ç—É—Å": { family: "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ", emoji: "üíú" },
            "–Ω–µ–º–∞—Ç–∞–Ω—Ç—É—Å": { family: "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ", emoji: "üíú" },
            "—Å–µ–Ω–ø–æ–ª–∏—è": { family: "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ", emoji: "üíú" },
            "—Ñ–∏–∞–ª–∫–∞": { family: "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ", emoji: "üíú" },
            "–≥–ª–æ–∫—Å–∏–Ω–∏—è": { family: "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ", emoji: "üíú" },
            "—Å—Ç—Ä–µ–ø—Ç–æ–∫–∞—Ä–ø—É—Å": { family: "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ", emoji: "üíú" },
            
            // –î–∏–æ—Å–∫–æ—Ä–µ–π–Ω—ã–µ
            "—Ç–∞–∫–∞": { family: "–î–∏–æ—Å–∫–æ—Ä–µ–π–Ω—ã–µ", emoji: "üåø" },
            "–¥–∏—Å–∫–æ—Ä–µ—è": { family: "–î–∏–æ—Å–∫–æ—Ä–µ–π–Ω—ã–µ", emoji: "üåø" },
            
            // –ö–∞–∫—Ç—É—Å–æ–≤—ã–µ
            "–∫–∞–∫—Ç—É—Å": { family: "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ", emoji: "üåµ" },
            "–æ–ø—É–Ω—Ü–∏—è": { family: "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ", emoji: "üåµ" },
            "—ç–ø–∏—Ñ–∏–ª–ª—É–º": { family: "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ", emoji: "üåµ" },
            "—à–ª—é–º–±–µ—Ä–≥–µ—Ä–∞": { family: "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ", emoji: "üåµ" },
            "—Ö–∞—Ç–∏–æ—Ä–∞": { family: "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ", emoji: "üåµ" },
            "–º–∞–º–º–∏–ª–ª—è—Ä–∏—è": { family: "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ", emoji: "üåµ" },
            "—ç—Ö–∏–Ω–æ–ø—Å–∏—Å": { family: "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ", emoji: "üåµ" },
            "–∞—Å—Ç—Ä–æ—Ñ–∏—Ç—É–º": { family: "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ", emoji: "üåµ" },
            "—Ü–µ—Ä–µ—É—Å": { family: "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ", emoji: "üåµ" },
            
            // –ö–∞—Ä–∏–∫–æ–≤—ã–µ
            "–ø–∞–ø–∞–π—è": { family: "–ö–∞—Ä–∏–∫–æ–≤—ã–µ", emoji: "ü•≠" },
            
            // –ö–∏–ø—Ä–µ–π–Ω—ã–µ
            "—Ñ—É–∫—Å–∏—è": { family: "–ö–∏–ø—Ä–µ–π–Ω—ã–µ", emoji: "üå∏" },
            
            // –ö–æ–º–º–µ–ª–∏–Ω–æ–≤—ã–µ
            "–∫–∞–ª–ª–∏–∑–∏—è": { family: "–ö–æ–º–º–µ–ª–∏–Ω–æ–≤—ã–µ", emoji: "üåø" },
            "—Ç—Ä–∞–¥–µ—Å–∫–∞–Ω—Ü–∏—è": { family: "–ö–æ–º–º–µ–ª–∏–Ω–æ–≤—ã–µ", emoji: "üåø" },
            "–º—É—Ä–¥–∞–Ω–Ω–∏—è": { family: "–ö–æ–º–º–µ–ª–∏–Ω–æ–≤—ã–µ", emoji: "üåø" },
            "—Ä–µ–æ": { family: "–ö–æ–º–º–µ–ª–∏–Ω–æ–≤—ã–µ", emoji: "üåø" },
            
            // –ö—Ä–∞–ø–∏–≤–Ω—ã–µ
            "–ø–∏–ª–µ—è": { family: "–ö—Ä–∞–ø–∏–≤–Ω—ã–µ", emoji: "üåø" },
            "—Å–æ–ª–µ–π—Ä–æ–ª–∏—è": { family: "–ö—Ä–∞–ø–∏–≤–Ω—ã–µ", emoji: "üåø" },
            
            // –ö—É—Ç—Ä–æ–≤—ã–µ
            "–∞–¥–µ–Ω–∏—É–º": { family: "–ö—É—Ç—Ä–æ–≤—ã–µ", emoji: "üå∫" },
            "–æ–ª–µ–∞–Ω–¥—Ä": { family: "–ö—É—Ç—Ä–æ–≤—ã–µ", emoji: "üå∫" },
            "–º–∞–Ω–¥–µ–≤–∏–ª–ª–∞": { family: "–ö—É—Ç—Ä–æ–≤—ã–µ", emoji: "üå∫" },
            "–ø–ª—é–º–µ—Ä–∏—è": { family: "–ö—É—Ç—Ä–æ–≤—ã–µ", emoji: "üå∫" },
            
            // –õ–∞—Å—Ç–æ–≤–Ω–µ–≤—ã–µ
            "—Å—Ç–µ—Ñ–∞–Ω–æ—Ç–∏—Å": { family: "–õ–∞—Å—Ç–æ–≤–Ω–µ–≤—ã–µ", emoji: "üå∫" },
            "—Ö–æ–π—è": { family: "–õ–∞—Å—Ç–æ–≤–Ω–µ–≤—ã–µ", emoji: "üå∫" },
            "—Ü–µ—Ä–æ–ø–µ–≥–∏—è": { family: "–õ–∞—Å—Ç–æ–≤–Ω–µ–≤—ã–µ", emoji: "üå∫" },
            "—Å—Ç–∞–ø–µ–ª–∏—è": { family: "–õ–∞—Å—Ç–æ–≤–Ω–µ–≤—ã–µ", emoji: "üå∫" },
            
            // –ú–∞–ª—å–≤–æ–≤—ã–µ
            "–∞–±—É—Ç–∏–ª–æ–Ω": { family: "–ú–∞–ª—å–≤–æ–≤—ã–µ", emoji: "üå∏" },
            "–≥–∏–±–∏—Å–∫—É—Å": { family: "–ú–∞–ª—å–≤–æ–≤—ã–µ", emoji: "üå∏" },
            "–ø–∞—Ö–∏—Ä–∞": { family: "–ú–∞–ª—å–≤–æ–≤—ã–µ", emoji: "üå∏" },
            
            // –ú–∞—Ä–∞–Ω—Ç–æ–≤—ã–µ
            "–º–∞—Ä–∞–Ω—Ç–∞": { family: "–ú–∞—Ä–∞–Ω—Ç–æ–≤—ã–µ", emoji: "üéØ" },
            "–∫–∞–ª–∞—Ç–µ—è": { family: "–ú–∞—Ä–∞–Ω—Ç–æ–≤—ã–µ", emoji: "üéØ" },
            "–∫—Ç–µ–Ω–∞–Ω—Ç–∞": { family: "–ú–∞—Ä–∞–Ω—Ç–æ–≤—ã–µ", emoji: "üéØ" },
            "—Å—Ç—Ä–æ–º–∞–Ω–∞—Ç–∞": { family: "–ú–∞—Ä–∞–Ω—Ç–æ–≤—ã–µ", emoji: "üéØ" },
            
            // –ú–∞—Ä–µ–Ω–æ–≤—ã–µ
            "–∫–æ—Ñ–µ": { family: "–ú–∞—Ä–µ–Ω–æ–≤—ã–µ", emoji: "‚òï" },
            "–≥–∞—Ä–¥–µ–Ω–∏—è": { family: "–ú–∞—Ä–µ–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            "–∏–∫—Å–æ—Ä–∞": { family: "–ú–∞—Ä–µ–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            
            // –ú–∞—Å–ª–∏–Ω–æ–≤—ã–µ
            "–∂–∞—Å–º–∏–Ω": { family: "–ú–∞—Å–ª–∏–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            "–æ–ª–∏–≤–∞": { family: "–ú–∞—Å–ª–∏–Ω–æ–≤—ã–µ", emoji: "ü´í" },
            "–æ—Å–º–∞–Ω—Ç—É—Å": { family: "–ú–∞—Å–ª–∏–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            
            // –ú–∏—Ä—Ç–æ–≤—ã–µ
            "–∫–∞–ª–ª–∏—Å—Ç–µ–º–æ–Ω": { family: "–ú–∏—Ä—Ç–æ–≤—ã–µ", emoji: "üåø" },
            "–º–∏—Ä—Ç": { family: "–ú–∏—Ä—Ç–æ–≤—ã–µ", emoji: "üåø" },
            "—ç–≤–∫–∞–ª–∏–ø—Ç": { family: "–ú–∏—Ä—Ç–æ–≤—ã–µ", emoji: "üåø" },
            "–º–µ—Ç—Ä–æ—Å–∏–¥–µ—Ä–æ—Å": { family: "–ú–∏—Ä—Ç–æ–≤—ã–µ", emoji: "üåø" },
            
            // –ú–Ω–æ–≥–æ–Ω–æ–∂–∫–æ–≤—ã–µ
            "–ø–ª–∞—Ç–∏—Ü–µ—Ä–∏—É–º": { family: "–ú–Ω–æ–≥–æ–Ω–æ–∂–∫–æ–≤—ã–µ", emoji: "üåø" },
            "—Ñ–ª–µ–±–æ–¥–∏—É–º": { family: "–ú–Ω–æ–≥–æ–Ω–æ–∂–∫–æ–≤—ã–µ", emoji: "üåø" },
            "–ø–æ–ª–∏–ø–æ–¥–∏—É–º": { family: "–ú–Ω–æ–≥–æ–Ω–æ–∂–∫–æ–≤—ã–µ", emoji: "üåø" },
            
            // –ú–æ–ª–æ—á–∞–π–Ω—ã–µ
            "–º–æ–ª–æ—á–∞–π": { family: "–ú–æ–ª–æ—á–∞–π–Ω—ã–µ", emoji: "üåµ" },
            "–ø–µ–¥–∏–ª–∞–Ω—Ç—É—Å": { family: "–ú–æ–ª–æ—á–∞–π–Ω—ã–µ", emoji: "üåµ" },
            "–∫—Ä–æ—Ç–æ–Ω": { family: "–ú–æ–ª–æ—á–∞–π–Ω—ã–µ", emoji: "üåµ" },
            "–ø—É–∞–Ω—Å–µ—Ç—Ç–∏—è": { family: "–ú–æ–ª–æ—á–∞–π–Ω—ã–µ", emoji: "üåµ" },
            "–∞–∫–∞–ª–∏—Ñ–∞": { family: "–ú–æ–ª–æ—á–∞–π–Ω—ã–µ", emoji: "üåµ" },
            
            // –ù–∏–∫—Ç–∞–≥–∏–Ω–æ–≤—ã–µ
            "–±—É–≥–µ–Ω–≤–∏–ª–ª–∏—è": { family: "–ù–∏–∫—Ç–∞–≥–∏–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            "–º–∏—Ä–∞–±–∏–ª–∏—Å": { family: "–ù–∏–∫—Ç–∞–≥–∏–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            
            // –ù–æ—Ä–∏—á–Ω–∏–∫–æ–≤—ã–µ
            "–±—É–¥–ª–µ—è": { family: "–ù–æ—Ä–∏—á–Ω–∏–∫–æ–≤—ã–µ", emoji: "üå∏" },
            "–∫–∞–ª—å—Ü–µ–æ–ª—è—Ä–∏—è": { family: "–ù–æ—Ä–∏—á–Ω–∏–∫–æ–≤—ã–µ", emoji: "üå∏" },
            
            // –û—Ä—Ö–∏–¥–Ω—ã–µ
            "–æ—Ä—Ö–∏–¥–µ—è": { family: "–û—Ä—Ö–∏–¥–Ω—ã–µ", emoji: "ü¶ã" },
            "—Ñ–∞–ª–µ–Ω–æ–ø—Å–∏—Å": { family: "–û—Ä—Ö–∏–¥–Ω—ã–µ", emoji: "ü¶ã" },
            "–¥–µ–Ω–¥—Ä–æ–±–∏—É–º": { family: "–û—Ä—Ö–∏–¥–Ω—ã–µ", emoji: "ü¶ã" },
            "—Ü–∏–º–±–∏–¥–∏—É–º": { family: "–û—Ä—Ö–∏–¥–Ω—ã–µ", emoji: "ü¶ã" },
            "–ø–∞—Ñ–∏–æ–ø–µ–¥–∏–ª—É–º": { family: "–û—Ä—Ö–∏–¥–Ω—ã–µ", emoji: "ü¶ã" },
            "–≤–∞–Ω–¥–∞": { family: "–û—Ä—Ö–∏–¥–Ω—ã–µ", emoji: "ü¶ã" },
            "–∫–∞—Ç—Ç–ª–µ—è": { family: "–û—Ä—Ö–∏–¥–Ω—ã–µ", emoji: "ü¶ã" },
            "–æ–Ω—Ü–∏–¥–∏—É–º": { family: "–û—Ä—Ö–∏–¥–Ω—ã–µ", emoji: "ü¶ã" },
            "–º–∏–ª—å—Ç–æ–Ω–∏—è": { family: "–û—Ä—Ö–∏–¥–Ω—ã–µ", emoji: "ü¶ã" },
            
            // –ü–∞–ª—å–º–æ–≤—ã–µ
            "–ø–∞–ª—å–º–∞": { family: "–ü–∞–ª—å–º–æ–≤—ã–µ", emoji: "üå¥" },
            "—Ö–∞–º–µ–¥–æ—Ä–µ—è": { family: "–ü–∞–ª—å–º–æ–≤—ã–µ", emoji: "üå¥" },
            "—Ñ–∏–Ω–∏–∫": { family: "–ü–∞–ª—å–º–æ–≤—ã–µ", emoji: "üå¥" },
            "–≤–∞—à–∏–Ω–≥—Ç–æ–Ω–∏—è": { family: "–ü–∞–ª—å–º–æ–≤—ã–µ", emoji: "üå¥" },
            "—é–∫–∫–∞": { family: "–ü–∞–ª—å–º–æ–≤—ã–µ", emoji: "üå¥" },
            "–¥—Ä–∞—Ü–µ–Ω–∞": { family: "–ü–∞–ª—å–º–æ–≤—ã–µ", emoji: "üå¥" },
            "–ª–∏–≤–∏—Å—Ç–æ–Ω–∞": { family: "–ü–∞–ª—å–º–æ–≤—ã–µ", emoji: "üå¥" },
            "—Ä–∞–ø–∏—Å": { family: "–ü–∞–ª—å–º–æ–≤—ã–µ", emoji: "üå¥" },
            
            // –ü–∞—Å–ª–µ–Ω–æ–≤—ã–µ
            "–±—Ä—É–≥–º–∞–Ω—Å–∏—è": { family: "–ü–∞—Å–ª–µ–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            "–ø–∞—Å–ª–µ–Ω": { family: "–ü–∞—Å–ª–µ–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            "—Ä–∞–Ω—Ç–æ–Ω–µ—Ç—Ç–∏": { family: "–ü–∞—Å–ª–µ–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            "—Å–æ–ª–∞–Ω–¥—Ä–∞": { family: "–ü–∞—Å–ª–µ–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            "—Ç–∞–º–∞—Ä–∏–ª–ª–æ": { family: "–ü–∞—Å–ª–µ–Ω–æ–≤—ã–µ", emoji: "üçÖ" },
            "–ø–µ–ø–∏–Ω–æ": { family: "–ü–∞—Å–ª–µ–Ω–æ–≤—ã–µ", emoji: "üçà" },
            "–ø–µ—Ç—É–Ω–∏—è": { family: "–ü–∞—Å–ª–µ–Ω–æ–≤—ã–µ", emoji: "üå∏" },
            
            // –ü–µ—Ä–µ—á–Ω—ã–µ
            "–ø–µ–ø–µ—Ä–æ–º–∏—è": { family: "–ü–µ—Ä–µ—á–Ω—ã–µ", emoji: "üåø" },
            "–ø–µ—Ä–µ—Ü": { family: "–ü–µ—Ä–µ—á–Ω—ã–µ", emoji: "üå∂Ô∏è" },
            
            // –†—É—Ç–æ–≤—ã–µ
            "–ª–∏–º–æ–Ω": { family: "–†—É—Ç–æ–≤—ã–µ", emoji: "üçã" },
            "–∫–∞–ª–∞–º–æ–Ω–¥–∏–Ω": { family: "–†—É—Ç–æ–≤—ã–µ", emoji: "üçã" },
            "–º—É—Ä—Ä–∞–π—è": { family: "–†—É—Ç–æ–≤—ã–µ", emoji: "üå∏" },
            "—Ü–∏—Ç—Ä—É—Å": { family: "–†—É—Ç–æ–≤—ã–µ", emoji: "üçä" },
            "–∞–ø–µ–ª—å—Å–∏–Ω": { family: "–†—É—Ç–æ–≤—ã–µ", emoji: "üçä" },
            "–º–∞–Ω–¥–∞—Ä–∏–Ω": { family: "–†—É—Ç–æ–≤—ã–µ", emoji: "üçä" },
            
            // –°–∞—Ä—Ä–∞—Ü–µ–Ω–∏–µ–≤—ã–µ
            "—Å–∞—Ä—Ä–∞—Ü–µ–Ω–∏—è": { family: "–°–∞—Ä—Ä–∞—Ü–µ–Ω–∏–µ–≤—ã–µ", emoji: "üåø" },
            
            // –°–ø–∞—Ä–∂–µ–≤—ã–µ
            "–∞–≥–∞–≤–∞": { family: "–°–ø–∞—Ä–∂–µ–≤—ã–µ", emoji: "üåµ" },
            "–∞—Å–ø–∏–¥–∏—Å—Ç—Ä–∞": { family: "–°–ø–∞—Ä–∂–µ–≤—ã–µ", emoji: "üåø" },
            "–¥—Ä–∞—Ü–µ–Ω–∞": { family: "–°–ø–∞—Ä–∂–µ–≤—ã–µ", emoji: "üåø" },
            "–Ω–æ–ª–∏–Ω–∞": { family: "–°–ø–∞—Ä–∂–µ–≤—ã–µ", emoji: "üåø" },
            "—Å–∞–Ω—Å–µ–≤–∏–µ—Ä–∏—è": { family: "–°–ø–∞—Ä–∂–µ–≤—ã–µ", emoji: "üåø" },
            "—Ö–ª–æ—Ä–æ—Ñ–∏—Ç—É–º": { family: "–°–ø–∞—Ä–∂–µ–≤—ã–µ", emoji: "üåø" },
            "—é–∫–∫–∞": { family: "–°–ø–∞—Ä–∂–µ–≤—ã–µ", emoji: "üåø" },
            "–∞—Å–ø–∞—Ä–∞–≥—É—Å": { family: "–°–ø–∞—Ä–∂–µ–≤—ã–µ", emoji: "üåø" },
            
            // –°—Ç—Ä–∞—Å—Ç–æ—Ü–≤–µ—Ç–Ω—ã–µ
            "–ø–∞—Å—Å–∏—Ñ–ª–æ—Ä–∞": { family: "–°—Ç—Ä–∞—Å—Ç–æ—Ü–≤–µ—Ç–Ω—ã–µ", emoji: "üå∫" },
            
            // –¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ
            "–∫—Ä–∞—Å—Å—É–ª–∞": { family: "–¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ", emoji: "ü™¥" },
            "–∫–∞–ª–∞–Ω—Ö–æ—ç": { family: "–¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ", emoji: "ü™¥" },
            "—Å–µ–¥—É–º": { family: "–¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ", emoji: "ü™¥" },
            "—ç—Ö–µ–≤–µ—Ä–∏—è": { family: "–¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ", emoji: "ü™¥" },
            "—ç–æ–Ω–∏—É–º": { family: "–¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ", emoji: "ü™¥" },
            "—Ç–æ–ª—Å—Ç—è–Ω–∫–∞": { family: "–¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ", emoji: "ü™¥" },
            "–æ—á–∏—Ç–æ–∫": { family: "–¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ", emoji: "ü™¥" },
            
            // –¢—É—Ç–æ–≤—ã–µ
            "—Ñ–∏–∫—É—Å": { family: "–¢—É—Ç–æ–≤—ã–µ", emoji: "üå≥" },
            "–∏–Ω–∂–∏—Ä": { family: "–¢—É—Ç–æ–≤—ã–µ", emoji: "üå≥" },
            "—à–µ–ª–∫–æ–≤–∏—Ü–∞": { family: "–¢—É—Ç–æ–≤—ã–µ", emoji: "üå≥" },
            
            // –Ø—Å–Ω–æ—Ç–∫–æ–≤—ã–µ
            "–∫–æ–ª–µ—É—Å": { family: "–Ø—Å–Ω–æ—Ç–∫–æ–≤—ã–µ", emoji: "üçÉ" },
            "—Ä–æ–∑–º–∞—Ä–∏–Ω": { family: "–Ø—Å–Ω–æ—Ç–∫–æ–≤—ã–µ", emoji: "üçÉ" },
            "–∫–ª–µ—Ä–æ–¥–µ–Ω–¥—Ä—É–º": { family: "–Ø—Å–Ω–æ—Ç–∫–æ–≤—ã–µ", emoji: "üçÉ" },
            "–±–∞–∑–∏–ª–∏–∫": { family: "–Ø—Å–Ω–æ—Ç–∫–æ–≤—ã–µ", emoji: "üçÉ" },
            "–º—è—Ç–∞": { family: "–Ø—Å–Ω–æ—Ç–∫–æ–≤—ã–µ", emoji: "üçÉ" },
            "–º–µ–ª–∏—Å—Å–∞": { family: "–Ø—Å–Ω–æ—Ç–∫–æ–≤—ã–µ", emoji: "üçÉ" },
            "—à–∞–ª—Ñ–µ–π": { family: "–Ø—Å–Ω–æ—Ç–∫–æ–≤—ã–µ", emoji: "üçÉ" }
        };

        // –ë–ê–ó–ê –†–ï–¶–ï–ü–¢–û–í –ì–†–£–ù–¢–û–í –î–õ–Ø –ö–ê–ñ–î–û–ì–û –°–ï–ú–ï–ô–°–¢–í–ê (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        const SOIL_RECIPES = {
            "–ê–∫–∞–Ω—Ç–æ–≤—ã–µ": {
                components: [
                    { emoji: "üåø", name: "–¢–æ—Ä—Ñ –≤–µ—Ä—Ö–æ–≤–æ–π", percentage: "40%", description: "–ö–∏—Å–ª–∞—è —Å—Ä–µ–¥–∞" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–æ–π –ø–µ—Ä–µ–≥–Ω–æ–π", percentage: "25%", description: "–ü–∏—Ç–∞—Ç–µ–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞" },
                    { emoji: "üèñÔ∏è", name: "–ü–µ—Ä–ª–∏—Ç", percentage: "20%", description: "–î—Ä–µ–Ω–∞–∂ –∏ –∞—ç—Ä–∞—Ü–∏—è" },
                    { emoji: "üå≤", name: "–•–≤–æ–π–Ω–∞—è –∑–µ–º–ª—è", percentage: "10%", description: "–†—ã—Ö–ª–æ—Å—Ç—å" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "5%", description: "–ê–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫" }
                ],
                tips: [
                    "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —É–º–µ—Ä–µ–Ω–Ω—É—é –≤–ª–∞–∂–Ω–æ—Å—Ç—å",
                    "–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç —Ä–∞—Å—Å–µ—è–Ω–Ω—ã–π —Å–≤–µ—Ç",
                    "–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–ø—Ä—ã—Å–∫–∏–≤–∞–π—Ç–µ –ª–∏—Å—Ç—å—è"
                ]
            },
            "–ê–∏–∑–æ–≤—ã–µ": {
                components: [
                    { emoji: "üèúÔ∏è", name: "–ö—Ä—É–ø–Ω—ã–π –ø–µ—Å–æ–∫", percentage: "50%", description: "–û—Å–Ω–æ–≤–Ω–æ–π –¥—Ä–µ–Ω–∞–∂" },
                    { emoji: "üß±", name: "–ö–∏—Ä–ø–∏—á–Ω–∞—è –∫—Ä–æ—à–∫–∞", percentage: "25%", description: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥—Ä–µ–Ω–∞–∂" },
                    { emoji: "üåø", name: "–î–µ—Ä–Ω–æ–≤–∞—è –∑–µ–º–ª—è", percentage: "15%", description: "–ü–∏—Ç–∞—Ç–µ–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞" },
                    { emoji: "üåã", name: "–í—É–ª–∫–∞–Ω–∏—á–µ—Å–∫–∞—è –ª–∞–≤–∞", percentage: "10%", description: "–ú–∏–Ω–µ—Ä–∞–ª—å–Ω–∞—è –¥–æ–±–∞–≤–∫–∞" }
                ],
                tips: [
                    "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥—Ä–µ–Ω–∞–∂ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",
                    "–ü–æ–ª–∏–≤ —Ä–µ–¥–∫–∏–π, —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–∏–æ–¥ —Ä–æ—Å—Ç–∞",
                    "–Ø—Ä–∫–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ"
                ]
            },
            "–ê—Ä–æ–∏–¥–Ω—ã–µ": {
                components: [
                    { emoji: "üåø", name: "–¢–æ—Ä—Ñ –≤–µ—Ä—Ö–æ–≤–æ–π", percentage: "30%", description: "–ö–∏—Å–ª–∞—è —Å—Ä–µ–¥–∞" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–æ–π –ø–µ—Ä–µ–≥–Ω–æ–π", percentage: "25%", description: "–ü–∏—Ç–∞—Ç–µ–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞" },
                    { emoji: "üå≤", name: "–•–≤–æ–π–Ω–∞—è –∑–µ–º–ª—è", percentage: "20%", description: "–†—ã—Ö–ª–æ—Å—Ç—å –∏ –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å" },
                    { emoji: "üèñÔ∏è", name: "–ü–µ—Ä–ª–∏—Ç/–í–µ—Ä–º–∏–∫—É–ª–∏—Ç", percentage: "15%", description: "–í–ª–∞–≥–æ–µ–º–∫–æ—Å—Ç—å" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "10%", description: "–ó–∞—â–∏—Ç–∞ –æ—Ç –≥–Ω–∏–µ–Ω–∏—è" }
                ],
                tips: [
                    "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –≤—ã—Å–æ–∫—É—é –≤–ª–∞–∂–Ω–æ—Å—Ç—å –≤–æ–∑–¥—É—Ö–∞",
                    "–ò–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä—è–º—ã—Ö —Å–æ–ª–Ω–µ—á–Ω—ã—Ö –ª—É—á–µ–π",
                    "–£–¥–æ–±—Ä—è–π—Ç–µ –≤ –ø–µ—Ä–∏–æ–¥ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞"
                ]
            },
            "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ": {
                components: [
                    { emoji: "üèúÔ∏è", name: "–ö—Ä—É–ø–Ω—ã–π –ø–µ—Å–æ–∫", percentage: "40%", description: "–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–π –¥—Ä–µ–Ω–∞–∂" },
                    { emoji: "üåã", name: "–í—É–ª–∫–∞–Ω–∏—á–µ—Å–∫–∞—è –ª–∞–≤–∞", percentage: "20%", description: "–ú–∏–Ω–µ—Ä–∞–ª—å–Ω–∞—è –¥–æ–±–∞–≤–∫–∞" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–æ–π –ø–µ—Ä–µ–≥–Ω–æ–π", percentage: "15%", description: "–ü–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞" },
                    { emoji: "üß±", name: "–ö–∏—Ä–ø–∏—á–Ω–∞—è –∫—Ä–æ—à–∫–∞", percentage: "15%", description: "–î—Ä–µ–Ω–∞–∂ –∏ –∞—ç—Ä–∞—Ü–∏—è" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "10%", description: "–ê–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫" }
                ],
                tips: [
                    "–î–æ–±–∞–≤—å—Ç–µ 1 —Å—Ç. –ª–æ–∂–∫—É –¥–æ–ª–æ–º–∏—Ç–æ–≤–æ–π –º—É–∫–∏ –Ω–∞ 1 –ª –≥—Ä—É–Ω—Ç–∞",
                    "–ü–æ–ª–∏–≤ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Å—ã—Ö–∞–Ω–∏—è –≥—Ä—É–Ω—Ç–∞",
                    "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ä—à–∫–∏ —Å –¥—Ä–µ–Ω–∞–∂–Ω—ã–º–∏ –æ—Ç–≤–µ—Ä—Å—Ç–∏—è–º–∏"
                ]
            },
            "–û—Ä—Ö–∏–¥–Ω—ã–µ": {
                components: [
                    { emoji: "üå≤", name: "–ö–æ—Ä–∞ —Å–æ—Å–Ω—ã", percentage: "50%", description: "–û—Å–Ω–æ–≤–Ω–æ–π —Å—É–±—Å—Ç—Ä–∞—Ç" },
                    { emoji: "üå∞", name: "–ú–æ—Ö —Å—Ñ–∞–≥–Ω—É–º", percentage: "20%", description: "–í–ª–∞–≥–æ–µ–º–∫–æ—Å—Ç—å" },
                    { emoji: "üß±", name: "–ö–µ—Ä–∞–º–∑–∏—Ç", percentage: "15%", description: "–î—Ä–µ–Ω–∞–∂–Ω—ã–π —Å–ª–æ–π" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "10%", description: "–û–±–µ–∑–∑–∞—Ä–∞–∂–∏–≤–∞–Ω–∏–µ" },
                    { emoji: "ü••", name: "–ö–æ–∫–æ—Å–æ–≤—ã–µ —á–∏–ø—Å—ã", percentage: "5%", description: "–í–æ–∑–¥—É—Ö–æ–ø—Ä–æ–Ω–∏—Ü–∞–µ–º–æ—Å—Ç—å" }
                ],
                tips: [
                    "–°—É–±—Å—Ç—Ä–∞—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å—ã—Ö–∞—Ç—å –º–µ–∂–¥—É –ø–æ–ª–∏–≤–∞–º–∏",
                    "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –≥–æ—Ä—à–∫–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–æ—Ä–Ω–µ–π",
                    "–û–ø—Ä—ã—Å–∫–∏–≤–∞–π—Ç–µ –≤–æ–∑–¥—É—à–Ω—ã–µ –∫–æ—Ä–Ω–∏"
                ]
            },
            "–¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ": {
                components: [
                    { emoji: "üèúÔ∏è", name: "–ö—Ä—É–ø–Ω–æ–∑–µ—Ä–Ω–∏—Å—Ç—ã–π –ø–µ—Å–æ–∫", percentage: "35%", description: "–û—Å–Ω–æ–≤–Ω–æ–π –¥—Ä–µ–Ω–∞–∂" },
                    { emoji: "üåø", name: "–î–µ—Ä–Ω–æ–≤–∞—è –∑–µ–º–ª—è", percentage: "25%", description: "–ü–∏—Ç–∞—Ç–µ–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–∞—è –∑–µ–º–ª—è", percentage: "20%", description: "–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ –≤–µ—â–µ—Å—Ç–≤–∞" },
                    { emoji: "üß±", name: "–ö–∏—Ä–ø–∏—á–Ω–∞—è –∫—Ä–æ—à–∫–∞", percentage: "15%", description: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥—Ä–µ–Ω–∞–∂" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "5%", description: "–ê–Ω—Ç–∏–±–∞–∫—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç" }
                ],
                tips: [
                    "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥—Ä–µ–Ω–∞–∂ - –∑–∞–ª–æ–≥ —É—Å–ø–µ—Ö–∞",
                    "–ü–æ–ª–∏–≤–∞–π—Ç–µ —É–º–µ—Ä–µ–Ω–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –∑–∏–º–æ–π",
                    "–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç —Ç–µ—Å–Ω—ã–µ –≥–æ—Ä—à–∫–∏"
                ]
            },
            "–ë–µ–≥–æ–Ω–∏–µ–≤—ã–µ": {
                components: [
                    { emoji: "üåø", name: "–¢–æ—Ä—Ñ", percentage: "35%", description: "–ö–∏—Å–ª–∞—è —Å—Ä–µ–¥–∞" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–æ–π –ø–µ—Ä–µ–≥–Ω–æ–π", percentage: "25%", description: "–ü–∏—Ç–∞–Ω–∏–µ" },
                    { emoji: "üèñÔ∏è", name: "–ü–µ—Ä–ª–∏—Ç", percentage: "20%", description: "–î—Ä–µ–Ω–∞–∂" },
                    { emoji: "üå≤", name: "–•–≤–æ–π–Ω–∞—è –∑–µ–º–ª—è", percentage: "15%", description: "–†—ã—Ö–ª–æ—Å—Ç—å" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "5%", description: "–ê–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫" }
                ],
                tips: [
                    "–ò–∑–±–µ–≥–∞–π—Ç–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤–æ–¥—ã –Ω–∞ –ª–∏—Å—Ç—å—è",
                    "–£–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–ª–∏–≤",
                    "–†–∞—Å—Å–µ—è–Ω–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ"
                ]
            },
            "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ": {
                components: [
                    { emoji: "üåø", name: "–¢–æ—Ä—Ñ –≤–µ—Ä—Ö–æ–≤–æ–π", percentage: "40%", description: "–ö–∏—Å–ª–∞—è —Å—Ä–µ–¥–∞" },
                    { emoji: "üèñÔ∏è", name: "–ü–µ—Ä–ª–∏—Ç", percentage: "25%", description: "–í–æ–∑–¥—É—Ö–æ–ø—Ä–æ–Ω–∏—Ü–∞–µ–º–æ—Å—Ç—å" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–æ–π –ø–µ—Ä–µ–≥–Ω–æ–π", percentage: "20%", description: "–ü–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞" },
                    { emoji: "üå∞", name: "–ú–æ—Ö —Å—Ñ–∞–≥–Ω—É–º", percentage: "10%", description: "–í–ª–∞–≥–æ–µ–º–∫–æ—Å—Ç—å" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "5%", description: "–ê–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫" }
                ],
                tips: [
                    "–ò–∑–±–µ–≥–∞–π—Ç–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤–æ–¥—ã –Ω–∞ –ª–∏—Å—Ç—å—è",
                    "–ü–æ–ª–∏–≤–∞–π—Ç–µ —á–µ—Ä–µ–∑ –ø–æ–¥–¥–æ–Ω",
                    "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —É–º–µ—Ä–µ–Ω–Ω—É—é –≤–ª–∞–∂–Ω–æ—Å—Ç—å"
                ]
            },
            "–ú–æ–ª–æ—á–∞–π–Ω—ã–µ": {
                components: [
                    { emoji: "üèúÔ∏è", name: "–ö—Ä—É–ø–Ω—ã–π –ø–µ—Å–æ–∫", percentage: "35%", description: "–î—Ä–µ–Ω–∞–∂" },
                    { emoji: "üåø", name: "–î–µ—Ä–Ω–æ–≤–∞—è –∑–µ–º–ª—è", percentage: "30%", description: "–ü–∏—Ç–∞–Ω–∏–µ" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–∞—è –∑–µ–º–ª—è", percentage: "20%", description: "–û—Ä–≥–∞–Ω–∏–∫–∞" },
                    { emoji: "üß±", name: "–ö–∏—Ä–ø–∏—á–Ω–∞—è –∫—Ä–æ—à–∫–∞", percentage: "10%", description: "–ê—ç—Ä–∞—Ü–∏—è" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "5%", description: "–ó–∞—â–∏—Ç–∞" }
                ],
                tips: [
                    "–û—Å—Ç–æ—Ä–æ–∂–Ω–æ —Å –ø–æ–ª–∏–≤–æ–º - –ª–µ–≥–∫–æ –∑–∞–≥–Ω–∏–≤–∞—é—Ç",
                    "–ù—É–∂–¥–∞—é—Ç—Å—è –≤ —è—Ä–∫–æ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏",
                    "–ë–µ—Ä–µ–≥–∏—Ç–µ –æ—Ç —Å–∫–≤–æ–∑–Ω—è–∫–æ–≤"
                ]
            },
            "–ú–∞—Ä–∞–Ω—Ç–æ–≤—ã–µ": {
                components: [
                    { emoji: "üåø", name: "–¢–æ—Ä—Ñ", percentage: "30%", description: "–ö–∏—Å–ª–∞—è —Å—Ä–µ–¥–∞" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–æ–π –ø–µ—Ä–µ–≥–Ω–æ–π", percentage: "25%", description: "–ü–∏—Ç–∞–Ω–∏–µ" },
                    { emoji: "üèñÔ∏è", name: "–ü–µ—Ä–ª–∏—Ç", percentage: "20%", description: "–í–ª–∞–≥–æ–µ–º–∫–æ—Å—Ç—å" },
                    { emoji: "üå∞", name: "–ú–æ—Ö —Å—Ñ–∞–≥–Ω—É–º", percentage: "15%", description: "–£–≤–ª–∞–∂–Ω–µ–Ω–∏–µ" },
                    { emoji: "üå≤", name: "–•–≤–æ–π–Ω–∞—è –∑–µ–º–ª—è", percentage: "10%", description: "–†—ã—Ö–ª–æ—Å—Ç—å" }
                ],
                tips: [
                    "–í—ã—Å–æ–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –≤–æ–∑–¥—É—Ö–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞",
                    "–ò–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä—è–º–æ–≥–æ —Å–æ–ª–Ω—Ü–∞",
                    "–ü–æ–ª–∏–≤–∞–π—Ç–µ –º—è–≥–∫–æ–π –æ—Ç—Å—Ç–æ—è–Ω–Ω–æ–π –≤–æ–¥–æ–π"
                ]
            },
            "–°–ø–∞—Ä–∂–µ–≤—ã–µ": {
                components: [
                    { emoji: "üåø", name: "–î–µ—Ä–Ω–æ–≤–∞—è –∑–µ–º–ª—è", percentage: "30%", description: "–ü–∏—Ç–∞—Ç–µ–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–æ–π –ø–µ—Ä–µ–≥–Ω–æ–π", percentage: "25%", description: "–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ –≤–µ—â–µ—Å—Ç–≤–∞" },
                    { emoji: "üèúÔ∏è", name: "–ö—Ä—É–ø–Ω—ã–π –ø–µ—Å–æ–∫", percentage: "20%", description: "–î—Ä–µ–Ω–∞–∂" },
                    { emoji: "üèñÔ∏è", name: "–ü–µ—Ä–ª–∏—Ç", percentage: "15%", description: "–ê—ç—Ä–∞—Ü–∏—è" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "10%", description: "–ó–∞—â–∏—Ç–∞ –∫–æ—Ä–Ω–µ–π" }
                ],
                tips: [
                    "–ü–µ—Ä–µ—Å–∞–∂–∏–≤–∞–π—Ç–µ –º–µ—Ç–æ–¥–æ–º –ø–µ—Ä–µ–≤–∞–ª–∫–∏",
                    "–û–±–µ—Å–ø–µ—á—å—Ç–µ —Ö–æ—Ä–æ—à–∏–π –¥—Ä–µ–Ω–∞–∂",
                    "–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–ø—Ä—ã—Å–∫–∏–≤–∞–π—Ç–µ –ª–∏—Å—Ç—å—è"
                ]
            },
            "–ë—Ä–æ–º–µ–ª–∏–µ–≤—ã–µ": {
                components: [
                    { emoji: "üå≤", name: "–ö–æ—Ä–∞ —Å–æ—Å–Ω—ã", percentage: "40%", description: "–í–æ–∑–¥—É—Ö–æ–ø—Ä–æ–Ω–∏—Ü–∞–µ–º–∞—è –æ—Å–Ω–æ–≤–∞" },
                    { emoji: "üå∞", name: "–ú–æ—Ö —Å—Ñ–∞–≥–Ω—É–º", percentage: "30%", description: "–í–ª–∞–≥–æ–µ–º–∫–æ—Å—Ç—å" },
                    { emoji: "ü••", name: "–ö–æ–∫–æ—Å–æ–≤–æ–µ –≤–æ–ª–æ–∫–Ω–æ", percentage: "15%", description: "–†—ã—Ö–ª–æ—Å—Ç—å" },
                    { emoji: "üèñÔ∏è", name: "–ü–µ—Ä–ª–∏—Ç", percentage: "10%", description: "–ê—ç—Ä–∞—Ü–∏—è" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "5%", description: "–ê–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫" }
                ],
                tips: [
                    "–ü–æ–ª–∏–≤–∞–π—Ç–µ –≤ —Ä–æ–∑–µ—Ç–∫—É –ª–∏—Å—Ç—å–µ–≤",
                    "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –≤—ã—Å–æ–∫—É—é –≤–ª–∞–∂–Ω–æ—Å—Ç—å",
                    "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–ø–∏—Ñ–∏—Ç–Ω—ã–µ —É–¥–æ–±—Ä–µ–Ω–∏—è"
                ]
            },
            "–¢—É—Ç–æ–≤—ã–µ": {
                components: [
                    { emoji: "üåø", name: "–î–µ—Ä–Ω–æ–≤–∞—è –∑–µ–º–ª—è", percentage: "35%", description: "–ü–∏—Ç–∞—Ç–µ–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–æ–π –ø–µ—Ä–µ–≥–Ω–æ–π", percentage: "25%", description: "–û—Ä–≥–∞–Ω–∏–∫–∞" },
                    { emoji: "üèúÔ∏è", name: "–ü–µ—Å–æ–∫", percentage: "20%", description: "–î—Ä–µ–Ω–∞–∂" },
                    { emoji: "üèñÔ∏è", name: "–ü–µ—Ä–ª–∏—Ç", percentage: "15%", description: "–ê—ç—Ä–∞—Ü–∏—è" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "5%", description: "–ê–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫" }
                ],
                tips: [
                    "–£–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–ª–∏–≤",
                    "–Ø—Ä–∫–æ–µ —Ä–∞—Å—Å–µ—è–Ω–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ",
                    "–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–æ–¥–∫–æ—Ä–º–∫–∏ –≤ –ø–µ—Ä–∏–æ–¥ —Ä–æ—Å—Ç–∞"
                ]
            }
            // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–µ–º–µ–π—Å—Ç–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç
        };

        // –û–°–ù–û–í–ù–û–ô –ö–û–î –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        document.addEventListener('DOMContentLoaded', function() {
            // –≠–õ–ï–ú–ï–ù–¢–´
            const screens = {
                loading: document.getElementById('loading-screen'),
                selection: document.getElementById('selection-screen'),
                processing: document.getElementById('processing-screen'),
                results: document.getElementById('results-screen')
            };
            
            const plantSearchInput = document.getElementById('plant-search-input');
            const searchResults = document.getElementById('search-results');
            const familiesContainer = document.getElementById('families-container');
            const resultsContainer = document.getElementById('results-container');
            const restartBtn = document.getElementById('restart-btn');
            const shareVkBtn = document.getElementById('share-vk');
            const shareTgBtn = document.getElementById('share-tg');
            const loaderStatus = document.getElementById('loader-status');
            const processingStatus = document.getElementById('processing-status');
            const processingProgress = document.getElementById('processing-progress');
            const loaderProgress = document.getElementById('loader-progress');
            
            const steps = {
                step1: document.getElementById('step1'),
                step2: document.getElementById('step2'),
                step3: document.getElementById('step3'),
                step4: document.getElementById('step4')
            };
            
            // –î–ê–ù–ù–´–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
            let selectedFamily = null;
            let selectedFamilyName = '';
            let selectedFamilyEmoji = '';
            
            // –£–ù–ò–ö–ê–õ–¨–ù–´–ï –°–ï–ú–ï–ô–°–¢–í–ê –ò–ó –ë–ê–ó–´
            const uniqueFamilies = [...new Set(Object.values(PLANT_DATABASE).map(p => p.family))].sort();
            const familyEmojis = {
                "–ê–∫–∞–Ω—Ç–æ–≤—ã–µ": "üå∫",
                "–ê–∏–∑–æ–≤—ã–µ": "ü™®",
                "–ê–º–∞—Ä–∏–ª–ª–∏—Å–æ–≤—ã–µ": "üå∫",
                "–ê–Ω–∞–∫–∞–º–ø—Å–µ—Ä–æ–≤—ã–µ": "üåø",
                "–ê—Ä–æ–∏–¥–Ω—ã–µ": "üçÉ",
                "–ê—Ä–∞–ª–∏–µ–≤—ã–µ": "üåø",
                "–ê—Å—Ñ–æ–¥–µ–ª–æ–≤—ã–µ": "üåµ",
                "–ê—Å—Ç—Ä–æ–≤—ã–µ": "üåº",
                "–ë–∞–Ω–∞–Ω–æ–≤—ã–µ": "üçå",
                "–ë–µ–≥–æ–Ω–∏–µ–≤—ã–µ": "üå∫",
                "–ë–∏–≥–Ω–æ–Ω–∏–µ–≤—ã–µ": "üå∫",
                "–ë–æ–±–æ–≤—ã–µ": "ü¶ã",
                "–ë—Ä–æ–º–µ–ª–∏–µ–≤—ã–µ": "üå∫",
                "–í–∏–Ω–æ–≥—Ä–∞–¥–æ–≤—ã–µ": "üçá",
                "–ì–µ—Ä–∞–Ω–∏–µ–≤—ã–µ": "üå∫",
                "–ì–µ—Å–Ω–µ—Ä–∏–µ–≤—ã–µ": "üíú",
                "–î–∏–æ—Å–∫–æ—Ä–µ–π–Ω—ã–µ": "üåø",
                "–ö–∞–∫—Ç—É—Å–æ–≤—ã–µ": "üåµ",
                "–ö–∞—Ä–∏–∫–æ–≤—ã–µ": "ü•≠",
                "–ö–∏–ø—Ä–µ–π–Ω—ã–µ": "üå∏",
                "–ö–æ–º–º–µ–ª–∏–Ω–æ–≤—ã–µ": "üåø",
                "–ö—Ä–∞–ø–∏–≤–Ω—ã–µ": "üåø",
                "–ö—É—Ç—Ä–æ–≤—ã–µ": "üå∫",
                "–õ–∞—Å—Ç–æ–≤–Ω–µ–≤—ã–µ": "üå∫",
                "–ú–∞–ª—å–≤–æ–≤—ã–µ": "üå∏",
                "–ú–∞—Ä–∞–Ω—Ç–æ–≤—ã–µ": "üéØ",
                "–ú–∞—Ä–µ–Ω–æ–≤—ã–µ": "‚òï",
                "–ú–∞—Å–ª–∏–Ω–æ–≤—ã–µ": "üå∏",
                "–ú–∏—Ä—Ç–æ–≤—ã–µ": "üåø",
                "–ú–Ω–æ–≥–æ–Ω–æ–∂–∫–æ–≤—ã–µ": "üåø",
                "–ú–æ–ª–æ—á–∞–π–Ω—ã–µ": "üåµ",
                "–ù–∏–∫—Ç–∞–≥–∏–Ω–æ–≤—ã–µ": "üå∏",
                "–ù–æ—Ä–∏—á–Ω–∏–∫–æ–≤—ã–µ": "üå∏",
                "–û—Ä—Ö–∏–¥–Ω—ã–µ": "ü¶ã",
                "–ü–∞–ª—å–º–æ–≤—ã–µ": "üå¥",
                "–ü–∞—Å–ª–µ–Ω–æ–≤—ã–µ": "üå∏",
                "–ü–µ—Ä–µ—á–Ω—ã–µ": "üåø",
                "–†—É—Ç–æ–≤—ã–µ": "üçã",
                "–°–∞—Ä—Ä–∞—Ü–µ–Ω–∏–µ–≤—ã–µ": "üåø",
                "–°–ø–∞—Ä–∂–µ–≤—ã–µ": "üåø",
                "–°—Ç—Ä–∞—Å—Ç–æ—Ü–≤–µ—Ç–Ω—ã–µ": "üå∫",
                "–¢–æ–ª—Å—Ç—è–Ω–∫–æ–≤—ã–µ": "ü™¥",
                "–¢—É—Ç–æ–≤—ã–µ": "üå≥",
                "–Ø—Å–Ω–æ—Ç–∫–æ–≤—ã–µ": "üçÉ"
            };
            
            // –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô –†–ï–¶–ï–ü–¢ –î–õ–Ø –°–ï–ú–ï–ô–°–¢–í –ë–ï–ó –°–ü–ï–¶–ò–§–ò–ß–ï–°–ö–û–ì–û –†–ï–¶–ï–ü–¢–ê
            const UNIVERSAL_RECIPE = {
                components: [
                    { emoji: "üåø", name: "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –≥—Ä—É–Ω—Ç", percentage: "50%", description: "–ë–∞–∑–æ–≤–∞—è –ø–∏—Ç–∞—Ç–µ–ª—å–Ω–∞—è —Å–º–µ—Å—å" },
                    { emoji: "üèñÔ∏è", name: "–ü–µ—Ä–ª–∏—Ç", percentage: "20%", description: "–î–ª—è –¥—Ä–µ–Ω–∞–∂–∞ –∏ –∞—ç—Ä–∞—Ü–∏–∏" },
                    { emoji: "üçÇ", name: "–õ–∏—Å—Ç–æ–≤–æ–π –ø–µ—Ä–µ–≥–Ω–æ–π", percentage: "15%", description: "–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ –≤–µ—â–µ—Å—Ç–≤–∞" },
                    { emoji: "üèúÔ∏è", name: "–ü–µ—Å–æ–∫", percentage: "10%", description: "–£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã" },
                    { emoji: "‚ö´", name: "–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–≥–æ–ª—å", percentage: "5%", description: "–ê–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫" }
                ],
                tips: [
                    "–ü–æ–¥–±–µ—Ä–∏—Ç–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —É—Ö–æ–¥ –ø–æ –≤–∏–¥—É —Ä–∞—Å—Ç–µ–Ω–∏—è",
                    "–°–ª–µ–¥–∏—Ç–µ –∑–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç—å—é –≥—Ä—É–Ω—Ç–∞",
                    "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä–µ–Ω–∞–∂ –Ω–∞ –¥–Ω–µ –≥–æ—Ä—à–∫–∞"
                ]
            };
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
            initApp();
            
            function initApp() {
                // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑–∫–∏
                startLoadingSequence();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
                initSearch();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Å–µ–º–µ–π—Å—Ç–≤
                initFamilySelection();
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
                restartBtn.addEventListener('click', restartApp);
                shareVkBtn.addEventListener('click', () => shareResult('vk'));
                shareTgBtn.addEventListener('click', () => shareResult('telegram'));
            }
            
            function startLoadingSequence() {
                let progress = 0;
                loaderProgress.style.width = '0%';
                
                const interval = setInterval(() => {
                    progress += 1;
                    loaderProgress.style.width = `${progress}%`;
                    
                    if (progress <= 30) {
                        loaderStatus.textContent = "–ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–∑—É —Ä–∞—Å—Ç–µ–Ω–∏–π...";
                    } else if (progress <= 60) {
                        loaderStatus.textContent = "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–µ–º–µ–π—Å—Ç–≤–∞...";
                    } else if (progress <= 90) {
                        loaderStatus.textContent = "–§–æ—Ä–º–∏—Ä—É–µ–º —Ä–µ—Ü–µ–ø—Ç—ã...";
                    } else {
                        loaderStatus.textContent = "–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!";
                    }
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤—ã–±–æ—Ä—É —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
                        setTimeout(() => {
                            switchScreen(screens.loading, screens.selection);
                        }, 500);
                    }
                }, 30);
            }
            
            function switchScreen(fromScreen, toScreen) {
                console.log(`–ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω —Å ${fromScreen.id} –Ω–∞ ${toScreen.id}`);
                fromScreen.classList.remove('active');
                toScreen.classList.add('active');
            }
            
            function initSearch() {
                if (!plantSearchInput) return;
                
                plantSearchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase().trim();
                    
                    if (searchTerm.length < 2) {
                        if (searchResults) searchResults.classList.remove('active');
                        return;
                    }
                    
                    // –ü–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
                    const matches = Object.entries(PLANT_DATABASE)
                        .filter(([plantName, plantData]) => 
                            plantName.includes(searchTerm) || 
                            plantData.family.toLowerCase().includes(searchTerm)
                        )
                        .slice(0, 5);
                    
                    if (matches.length > 0 && searchResults) {
                        searchResults.innerHTML = matches.map(([plantName, plantData]) => `
                            <div class="search-match" data-family="${plantData.family}">
                                <div class="search-match-title">${plantName.charAt(0).toUpperCase() + plantName.slice(1)}</div>
                                <div class="search-match-subtitle">${plantData.emoji} –°–µ–º–µ–π—Å—Ç–≤–æ: ${plantData.family}</div>
                            </div>
                        `).join('');
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–∞
                        searchResults.querySelectorAll('.search-match').forEach(match => {
                            match.addEventListener('click', function() {
                                const family = this.getAttribute('data-family');
                                selectFamily(family);
                                
                                // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ä–∞—Å—Ç–µ–Ω–∏—è
                                const plantName = this.querySelector('.search-match-title').textContent;
                                if (plantSearchInput) plantSearchInput.value = plantName;
                                
                                // –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                                if (searchResults) searchResults.classList.remove('active');
                                
                                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä–µ–ª–æ–¥–µ—Ä
                                setTimeout(() => goToProcessing(), 500);
                            });
                        });
                        
                        searchResults.classList.add('active');
                    } else if (searchResults) {
                        searchResults.innerHTML = `
                            <div class="search-match">
                                <div class="search-match-title">–†–∞—Å—Ç–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>
                                <div class="search-match-subtitle">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å —Å–µ–º–µ–π—Å—Ç–≤–æ –≤—Ä—É—á–Ω—É—é</div>
                            </div>
                        `;
                        searchResults.classList.add('active');
                    }
                });
                
                // –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
                document.addEventListener('click', function(e) {
                    if (plantSearchInput && !plantSearchInput.contains(e.target) && 
                        searchResults && !searchResults.contains(e.target)) {
                        searchResults.classList.remove('active');
                    }
                });
            }
            
            function initFamilySelection() {
                if (!familiesContainer) return;
                
                // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–º–µ–π—Å—Ç–≤–∞
                familiesContainer.innerHTML = uniqueFamilies.map(family => {
                    const emoji = familyEmojis[family] || "üå±";
                    return `
                        <button class="family-btn" data-family="${family}">
                            <span class="family-emoji">${emoji}</span>
                            <span class="family-text">${family}</span>
                        </button>
                    `;
                }).join('');
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–∞
                familiesContainer.querySelectorAll('.family-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const family = this.getAttribute('data-family');
                        selectFamily(family);
                        
                        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∏—Å–∫
                        if (plantSearchInput) plantSearchInput.value = '';
                        if (searchResults) searchResults.classList.remove('active');
                        
                        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä–µ–ª–æ–¥–µ—Ä
                        setTimeout(() => goToProcessing(), 500);
                    });
                });
            }
            
            function selectFamily(family) {
                if (!family) return;
                
                // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                document.querySelectorAll('.family-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                
                // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É
                const selectedBtn = document.querySelector(`.family-btn[data-family="${family}"]`);
                if (selectedBtn) {
                    selectedBtn.classList.add('selected');
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —Å–µ–º–µ–π—Å—Ç–≤–æ
                selectedFamily = SOIL_RECIPES[family] || UNIVERSAL_RECIPE;
                selectedFamilyName = family;
                selectedFamilyEmoji = familyEmojis[family] || "üå±";
            }
            
            function goToProcessing() {
                if (!selectedFamily) {
                    showMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å–µ–º–µ–π—Å—Ç–≤–æ —Ä–∞—Å—Ç–µ–Ω–∏–π', 'error');
                    return;
                }
                
                console.log('–ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–ª—è —Å–µ–º–µ–π—Å—Ç–≤–∞:', selectedFamilyName);
                
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —ç–∫—Ä–∞–Ω—É –æ–±—Ä–∞–±–æ—Ç–∫–∏
                switchScreen(screens.selection, screens.processing);
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
                startProcessingSequence();
            }
            
            function startProcessingSequence() {
                let progress = 0;
                if (processingProgress) processingProgress.style.width = '0%';
                
                // –°–±—Ä–æ—Å —à–∞–≥–æ–≤
                Object.values(steps).forEach(step => {
                    if (step) {
                        step.classList.remove('active');
                        const icon = step.querySelector('i');
                        if (icon) icon.className = 'fas fa-check';
                    }
                });
                
                const interval = setInterval(() => {
                    progress += 1;
                    if (processingProgress) processingProgress.style.width = `${progress}%`;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–≥–∏
                    if (progress >= 25 && steps.step1) {
                        steps.step1.classList.add('active');
                        if (processingStatus) processingStatus.textContent = "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–µ–º–µ–π—Å—Ç–≤–æ...";
                    }
                    if (progress >= 50 && steps.step2) {
                        steps.step2.classList.add('active');
                        if (processingStatus) processingStatus.textContent = "–ü–æ–¥–±–∏—Ä–∞–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã...";
                    }
                    if (progress >= 75 && steps.step3) {
                        steps.step3.classList.add('active');
                        if (processingStatus) processingStatus.textContent = "–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏...";
                    }
                    if (progress >= 90 && steps.step4) {
                        steps.step4.classList.add('active');
                        if (processingStatus) processingStatus.textContent = "–§–æ—Ä–º–∏—Ä—É–µ–º —Ä–µ—Ü–µ–ø—Ç...";
                        const icon = steps.step4.querySelector('i');
                        if (icon) icon.className = 'fas fa-spinner fa-spin';
                    }
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        
                        // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
                        setTimeout(() => {
                            console.log('–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º');
                            switchScreen(screens.processing, screens.results);
                            showResults();
                        }, 1000);
                    }
                }, 30);
            }
            
            function showResults() {
                if (!selectedFamily || !resultsContainer) return;
                
                console.log('–ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è:', selectedFamilyName);
                
                resultsContainer.innerHTML = `
                    <div class="result-card">
                        <div class="result-family">
                            ${selectedFamilyEmoji} ${selectedFamilyName}
                        </div>
                        <h3 class="result-title">–ò–¥–µ–∞–ª—å–Ω—ã–π —Å–æ—Å—Ç–∞–≤ –≥—Ä—É–Ω—Ç–∞</h3>
                        
                        <div class="soil-components">
                            ${selectedFamily.components.map(component => `
                                <div class="component-item">
                                    <div class="component-emoji">${component.emoji}</div>
                                    <div class="component-content">
                                        <div class="component-name">${component.name}</div>
                                        <div class="component-percentage">${component.percentage}</div>
                                        <div class="component-desc">${component.description}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="result-tips">
                            <div class="tips-title">
                                <i class="fas fa-lightbulb"></i>
                                –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é
                            </div>
                            <ul class="tips-list">
                                ${selectedFamily.tips.map(tip => `
                                    <li class="tip-item">
                                        <i class="fas fa-check-circle tip-icon"></i>
                                        <span>${tip}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            function shareResult(platform) {
                if (!selectedFamily) {
                    showMessage('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏', 'error');
                    return;
                }
                
                // –°–°–´–õ–ö–ê –ù–ê –ú–ò–ù–ò-–ê–ü–ü
                const appUrl = 'https://t.me/PlantSurvivorbot/test';
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ç–µ–∫—Å—Ç–∞
                const componentsText = selectedFamily.components
                    .map(c => `‚Ä¢ ${c.name} - ${c.percentage}`)
                    .join('\n');
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è —à–µ—Ä–∏–Ω–≥–∞
                const shareText = `üåø –ì—Ä—É–Ω—Ç–æ–≤–µ–¥ —Å–æ–∑–¥–∞–ª –∏–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç –¥–ª—è ${selectedFamilyName}!\n\n` +
                               `üìã –°–æ—Å—Ç–∞–≤ –≥—Ä—É–Ω—Ç–∞:\n${componentsText}\n\n` +
                               `üí° –°–æ–≤–µ—Ç—ã:\n${selectedFamily.tips.map(t => `‚Ä¢ ${t}`).join('\n')}\n\n` +
                               `–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —Ä–µ—Ü–µ–ø—Ç –≥—Ä—É–Ω—Ç–∞! üëá\n` +
                               `${appUrl}`;
                
                let shareUrl = '';
                
                switch(platform) {
                    case 'vk':
                        shareUrl = `https://vk.com/share.php?url=${encodeURIComponent(appUrl)}&title=–ì—Ä—É–Ω—Ç–æ–≤–µ–¥&description=${encodeURIComponent(shareText)}&noparse=true`;
                        break;
                        
                    case 'telegram':
                        shareUrl = `https://t.me/share/url?url=${encodeURIComponent(appUrl)}&text=${encodeURIComponent(shareText)}`;
                        break;
                }
                
                if (shareUrl) {
                    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ
                    const width = 600;
                    const height = 500;
                    const left = (window.innerWidth - width) / 2;
                    const top = (window.innerHeight - height) / 2;
                    
                    window.open(shareUrl, '_blank', `width=${width},height=${height},top=${top},left=${left}`);
                }
            }
            
            function restartApp() {
                console.log('–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è');
                
                // –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö
                selectedFamily = null;
                selectedFamilyName = '';
                selectedFamilyEmoji = '';
                
                // –°–±—Ä–æ—Å UI
                document.querySelectorAll('.family-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                if (plantSearchInput) plantSearchInput.value = '';
                if (searchResults) searchResults.classList.remove('active');
                
                // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã–±–æ—Ä—É
                switchScreen(screens.results, screens.selection);
            }
            
            function showMessage(text, type) {
                // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                const message = document.createElement('div');
                message.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: ${type === 'success' ? '#4CAF50' : '#f44336'};
                    color: white;
                    padding: 12px 24px;
                    border-radius: 12px;
                    font-weight: 600;
                    z-index: 1000;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                    animation: fadeIn 0.3s ease;
                `;
                message.textContent = text;
                document.body.appendChild(message);
                
                // –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    message.style.opacity = '0';
                    message.style.transition = 'opacity 0.3s';
                    setTimeout(() => {
                        if (message.parentNode) {
                            message.parentNode.removeChild(message);
                        }
                    }, 300);
                }, 3000);
            }
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
        });
    </script>
</body>
</html>